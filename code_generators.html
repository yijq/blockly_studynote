<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>code_generators</title>
	<script src="blockly_compressed.js"></script>
	<script src="blocks_compressed.js"></script>
	<script src="javascript_compressed.js"></script>
	<script src="msg/js/en.js"></script>
	<style>
		#js_code{
			background-color: #f0f;
		}
	</style>
</head>
<body>
	<div id="blocklyDiv" style="width: 800px;height: 800px;"></div>
	<textarea id="js_code" cols="500" rows="500"></textarea>
	<xml id="toolbox" style="display: none">
	  	<block type="logic_boolean" disabled="true"></block>

		<label text="my_label" web-class="myLabelStyle"></label>

	  	<label text="your_label"></label>

	  	<block type="math_number">
	  	  <field name="NUM">42</field>
	  	</block>

		<sep gap="40"></sep>

	  	<block type="controls_for">
	  	  <value name="FROM">
	  	    <block type="math_number">
	  	      <field name="NUM">1</field>
	  	    </block>
	  	  </value>
	  	  <value name="TO">
	  	    <block type="math_number">
	  	      <field name="NUM">10</field>
	  	    </block>
	  	  </value>
	  	  <value name="BY">
	  	    <block type="math_number">
	  	      <field name="NUM">1</field>
	  	    </block>
	  	  </value>
	  	</block>

	  	<block type="math_arithmetic">
	  	  <field name="OP">ADD</field>
	  	  <value name="A">
	  	    <shadow type="math_number">
	  	      <field name="NUM">1</field>
	  	    </shadow>
	  	  </value>
	  	  <value name="B">
	  	    <shadow type="math_number">
	  	      <field name="NUM">1</field>
	  	    </shadow>
	  	  </value>
	  	</block>
	</xml>
</body>
<script>
	var workspace = Blockly.inject("blocklyDiv",
		{toolbox: document.getElementById("toolbox")});

	function myUpdateFunction () {
		var jsCode = Blockly.JavaScript.workspaceToCode(workspace);
		document.getElementById("js_code").value = jsCode;
	}

	workspace.addChangeListener(myUpdateFunction);

	// function myUpdateFunction(event) {
	//   var code = Blockly.JavaScript.workspaceToCode(workspace);
	//   document.getElementById('js_code').value = code;
	// }
	// workspace.addChangeListener(myUpdateFunction);
</script>
</html>