<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>custom_blocks</title>
	<script src="blockly_compressed.js"></script>
	<script src="blocks_compressed.js"></script>
	<script src="msg/js/en.js"></script>
</head>
<body>
	<div id="blocklyDiv" style="height: 480px;width: 600px;"></div>
	<xml id="toolbox" style="display: none">
	  <block type="controls_if"></block>
	  <block type="controls_repeat_ext"></block>
	  <block type="logic_compare"></block>
	  <block type="math_number"></block>
	  <block type="math_arithmetic"></block>
	  <block type="text"></block>
	  <block type="text_print"></block>
	  <block type="string_length"></block>
	</xml>	
</body>
<script>
	Blockly.Blocks["string_length"] = {
		init: function(){
			this.jsonInit({
				 "message0": 'length of %1',
				 "args0": [
				   {
				     "type": "input_value",
				     "name": "VALUE",
				     "check": "String"
				   }
				 ],
				 "output": "Number",
				 "colour": 20,
				 "tooltip": "Returns number of letters in the provided text.",
				 "helpUrl": "http://www.w3schools.com/jsref/jsref_length_string.asp"
			});
		}
	};
	// Blockly.JavaScript['text_length'] = function(block) {
	//   // String or array length.
	//   var argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE',
	//       Blockly.JavaScript.ORDER_FUNCTION_CALL) || '\'\'';
	//   return [argument0 + '.length', Blockly.JavaScript.ORDER_MEMBER];
	// };
	// Blockly.Blocks['string_length'] = {
	//   init: function() {
	//     this.appendValueInput('VALUE')
	//         .setCheck('String')
	//         .appendField('length of');
	//     this.setOutput(true, 'Number');
	//     this.setColour(160);
	//     this.setTooltip('Returns number of letters in the provided text.');
	//     this.setHelpUrl('http://www.w3schools.com/jsref/jsref_length_string.asp');
	//   }
	// };
	var workspace = Blockly.inject("blocklyDiv",
		{toolbox: document.getElementById("toolbox")});



</script>
</html>